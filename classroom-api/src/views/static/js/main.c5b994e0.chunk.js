(this["webpackJsonpclassroom-ui"]=this["webpackJsonpclassroom-ui"]||[]).push([[0],{108:function(e,t,a){e.exports=a(147)},113:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),o=(a(113),a(57)),l=a(11),s=a(19),u=a(40),m=a(22),d=a(91),f=a(92),p=a(12),v="AUTH_LOGIN_SUCCESS",h="AUTH_LOGOUT_SUCCESS",g="LOADING",E="LOADED",y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=JSON.stringify(t);a?window.localStorage.setItem(e,n):window.sessionStorage.setItem(e,n)},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?window.localStorage.getItem(e):window.sessionStorage.getItem(e);try{var n=JSON.parse(a);return n||{}}catch(r){return{}}},w=function(e){var t=window.localStorage.getItem(e)||window.sessionStorage.getItem(e);try{return JSON.parse(t)||{}}catch(a){return{}}},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=b(e,t);return t?window.localStorage.removeItem(e):window.sessionStorage.removeItem(e),a},O=function(e){window.localStorage.removeItem(e),window.sessionStorage.removeItem(e)},_=function(e){var t=e.isRemember;y("user",e,t),x("user",!t)},j=function(){return w("user")},k=function(){return O("user")},N=function(){return{initUrl:"",user:j()}},L=Object(p.a)({},N()),P=function(e,t){var a=Object(p.a)({},t);return _(a),Object(p.a)({},e,{user:a})},S=function(){return k(),N()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case"INIT_URL":return Object(p.a)({},e,{initUrl:t.payload});case h:return S();case v:return P(e,t.user);default:return e}},I="GET_ALL_SUCCESS",U="EMPTY_SUCCESS",H="FILTER_BY_STATE_SUCCESS",M=a(34),T=a(36);function A(e){var t=new Date(null);return t.setSeconds(e),t.toISOString().substr(11,5)}var B,R=function(e){var t=[],a=e.startHour,n=e.duration+e.startHour;do{t=[].concat(Object(T.a)(t),[a]),a++}while(a<n);return t.map((function(e){return String(e)}))},D=function(e){return e.map((function(e){return Object(p.a)({},e,{date:new Date(e.date).toLocaleDateString(),start:A(60*e.startHour*60),end:A(60*(e.startHour+e.duration)*60),durationPattern:R(e)})}))},F=function(e){var t={},a=[],n=[],r=e.reduce((function(e,t){return t.startHour<e?t.startHour:e}),e[0].startHour),c=e.reduce((function(e,t){return t.startHour+t.duration>e?t.startHour+t.duration:e}),e[0].startHour+e[0].duration);e.forEach((function(e){var r=Object(p.a)({},e,{conflict:!1}),c="".concat(r.primaryLocation," - ").concat(r.secondaryLocation);void 0===t[c]?t=Object(p.a)({},t,Object(M.a)({},c,{primary:r.primaryLocation,secondary:r.secondaryLocation,durationPattern:Object(T.a)(r.durationPattern),label:c,row:[r]})):function(e,t){var a=!1;return e.forEach((function(e){e.durationPattern.some((function(e){return t.durationPattern.includes(e)}))&&(a=!0)})),a}(t[c].row,r)?(n=[].concat(Object(T.a)(n),[r]),r.conflict=!0):(t[c].row=[].concat(Object(T.a)(t[c].row),[r]),t[c].durationPattern=[].concat(Object(T.a)(t[c].durationPattern),Object(T.a)(r.durationPattern)));t[c].row.sort((function(e,t){return e.startHour>t.startHour?1:e.startHour<t.startHour?-1:0})),a=[].concat(Object(T.a)(a),[r])}));var i=Object.entries(t).map((function(e){return Object(p.a)({},e[1])}));return i.sort((function(e,t){return e.secondary>t.secondary?1:e.secondary<t.secondary?-1:0})),i.sort((function(e,t){return e.primary>t.primary?1:e.primary<t.primary?-1:0})),{map:i=i.map((function(e){var t=Object(p.a)({},e),a=0;return t.row=t.row.map((function(e,t){var n=Object(p.a)({},e,{before:0});return t>0?(n.before=n.startHour-a,a=n.startHour+n.duration):n.startHour>r?(n.before=n.startHour-r,a=n.startHour+n.duration):(n.before=0,a=n.startHour+n.duration),n})),t})),pattern:t,hourConflict:n,activities:a,hMin:r,hMax:c}},z=function(e,t,a){var n=a.filter((function(a){return a[e]===t}));return console.log({res:n}),n},J=function(e,t){var a=t.filter((function(t){return!t.durationPattern.some((function(t){return e.durationPattern.includes(t)}))})).map((function(e){return e.label})),n="".concat(e.primaryLocation," - ").concat(e.secondaryLocation);return[].concat(Object(T.a)(a),[n])},q=function(e,t){var a=e.primaryLocation,n=e.secondaryLocation,r=t.filter((function(e){return e.primary===a&&e.secondary===n}));if(0===r.length)return[];var c=r[0].durationPattern;return c=c.filter((function(t){return!e.durationPattern.includes(t)})),["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"].filter((function(e){return!c.includes(e)}))},G=Object(p.a)({},{activities:[],hourConflict:[],map:[],count:0,hMin:0,hMax:0,filterParam:""}),W=function(e,t,a){var n=z(t,a,e.activities);return Object(p.a)({},e,{activities:n,filterParam:t})},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case I:var n=t.activities,r=t.count,c=t.search,i=t.hourConflict,o=t.map,l=t.hMin,s=t.hMax;return Object(p.a)({},e,{activities:n,hourConflict:i,map:o,hMin:l,hMax:s,count:""===c?r:e.count,filterParam:""});case H:return W(e,t.param,t.value);case U:return{activities:[],hourConflict:[],map:[],count:0,hMin:0,hMax:0,filterParam:""};default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case g:var n=t.flag;return Object(p.a)({},e,Object(M.a)({},n,!0));case E:var r=t.flag;return Object(p.a)({},e,Object(M.a)({},r,!1));default:return e}},X=a(81),Y=Object(m.a)(),$=Object(X.a)(Y),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,Z=Object(f.createLogger)({predicate:function(){return!1}}),ee=Object(u.e)((B=Y,Object(u.c)({router:Object(o.b)(B),auth:C,activity:V,load:K})),Q(Object(u.a)(d.a,Z,$))),te=a(29),ae=a(96),ne=a(205),re=a(177),ce=a(6),ie=a.n(ce);function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){return ie.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:g,flag:e});case 1:case"end":return a.stop()}}))}}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){return ie.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:E,flag:e});case 1:case"end":return a.stop()}}))}}var se=a(13),ue=a.n(se),me=a(39),de=a(50),fe=a(49),pe=a(52),ve=a(42),he=a.n(ve),ge=function e(){Object(me.a)(this,e);var t=j();this.token=void 0!==t&&t.auth?t.token:"",this.module="/api",this.headers={headers:{"x-access-token":this.token,"Content-Type":"application/json"}},this.url="".concat(this.module)},Ee=function(e){function t(){var e,a;Object(me.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(de.a)(this,(e=Object(fe.a)(t)).call.apply(e,[this].concat(r)))).logIn=function(e){var t=e.email,n=e.password;return new Promise((function(e,r){var c={email:t,password:n},i="".concat(a.url,"/auth/signin");he.a.post(i,c,a.headers).then((function(t){return e(t)})).catch((function(e){return r(e)}))}))},a}return Object(pe.a)(t,e),t}(ge);var ye=a(97),be=function(e){var t=e.component,a=e.authUser,n=Object(ye.a)(e,["component","authUser"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return a.token?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))},we=(a(137),a(173)),xe=a(208),Oe=a(76),_e=function(e){var t=e.title,a=e.subTitle,n=e.dispatch,c=e.user,i=e.history,o=e.isLoading,l=r.a.useState({userId:"",password:""}),s=Object(te.a)(l,2),u=s[0],m=s[1];r.a.useEffect((function(){null!==c.token&&void 0!==c.token&&i.push("/")}),[c]);var d=function(e){var t=e.target,a=t.name,n=t.value;m(Object(p.a)({},u,Object(M.a)({},a,n)))},f=function(e){var t;""===e.userId||""===e.password?ue.a.fire({title:"Uppssss ...",text:"Check user and password fields",icon:"warning"}):n((t={email:e.userId,password:e.password},function(e){return ie.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ie.a.awrap(e(oe("logIn")));case 2:try{(new Ee).logIn(Object(p.a)({},t)).then((function(t){if(t.data){var a=t.data;e({type:v,user:a})}else ue.a.fire({icon:"warning",title:"Upsss...",text:"Login no procesable"})})).catch((function(e){console.log({loginErr:e});var t=e.response;e.response?401===t.status?ue.a.fire({icon:"warning",title:"Upsss...",text:t.data.message}):t.data?ue.a.fire({icon:"error",title:"Error",text:t.data.message}):ue.a.fire({icon:"warning",title:"Upsss...",text:"Login no procesable"}):ue.a.fire({icon:"warning",title:"Upsss...",text:e})}))}catch(n){console.log({loginErr:n})}return a.next=5,ie.a.awrap(e(le("logIn")));case 5:case"end":return a.stop()}}))}))};return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login_card"},r.a.createElement(we.a,{in:o,className:"login_load"},r.a.createElement(re.a,null)),r.a.createElement("div",{className:"login_title"},r.a.createElement("div",{className:"login_title_first"},t),r.a.createElement("div",{className:"login_title_last"},a)),r.a.createElement("div",{className:"login_controls"},r.a.createElement(xe.a,{id:"userId",name:"userId",placeholder:"Nickname, userid, email ...",value:u.userId,onChange:d,onKeyUp:function(e){e.preventDefault(),e.stopPropagation(),13===e.keyCode&&f(u)}}),r.a.createElement(xe.a,{id:"password",name:"password",type:"password",placeholder:"secret doom, secret word, ...",value:u.password,onChange:d,onKeyUp:function(e){e.preventDefault(),e.stopPropagation(),13===e.keyCode&&f(u)}}),r.a.createElement(Oe.a,{className:"login_submit",onClick:function(){return f(u)}},"SIGN UP"))))};_e.defaultProps={isLoading:!1,subTitle:"Async and Powerfull",title:"Classroom Control"};var je=Object(l.c)((function(e){var t=e.auth,a=e.load;return{user:t.user,isLoading:Boolean(a.logIn)}}))(_e),ke=a(95),Ne=function(e){function t(e){var a;return Object(me.a)(this,t),(0,(a=Object(de.a)(this,Object(fe.a)(t).call(this,e))).props.dispatch)((function(e){return ie.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie.a.awrap(e(oe("authUser")));case 2:return t.prev=2,t.next=5,ie.a.awrap(e({type:h}));case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),console.log({loginErr:t.t0}),ue.a.fire({icon:"warning",title:"Upsss...",text:t.t0});case 11:return t.prev=11,t.next=14,ie.a.awrap(e(le("authUser")));case 14:return t.finish(11);case 15:case"end":return t.stop()}}),null,null,[[2,7,11,15]])})),a}return Object(pe.a)(t,e),Object(ke.a)(t,[{key:"render",value:function(){return r.a.createElement(s.a,{to:"/sign-in"})}}]),t}(n.PureComponent),Le=Object(l.c)()(Ne),Pe=(a(138),function(e){function t(){var e,a;Object(me.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(de.a)(this,(e=Object(fe.a)(t)).call.apply(e,[this].concat(r)))).getAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){var r="".concat(a.url,"/activity?search=").concat(e,"&sort=startHour:asc");he.a.get(r,a.headers).then((function(e){return t(e)})).catch((function(e){return n(e.response)}))}))},a.remove=function(e){return new Promise((function(t,n){var r="".concat(a.url,"/activity/").concat(e);he.a.delete(r,a.headers).then((function(e){return t(e)})).catch((function(e){return n(e.response)}))}))},a.clean=function(){return new Promise((function(e,t){var n="".concat(a.url,"/activity/empty");he.a.delete(n,a.headers).then((function(t){return e(t)})).catch((function(e){return t(e.response)}))}))},a.update=function(e){return new Promise((function(t,n){var r="".concat(a.url,"/activity/").concat(e._id),c={title:e.title,subTitle:e.subTitle,desc:e.desc,primaryLocation:e.primaryLocation,secondaryLocation:e.secondaryLocation,startHour:e.startHour};he.a.put(r,c,a.headers).then((function(e){return t(e)})).catch((function(e){return n(e.response)}))}))},a.upload=function(e){return new Promise((function(t,n){var r="".concat(a.url,"/activity/file"),c=new FormData;c.append("file",e),console.log({file:e}),he.a.post(r,c,a.headers).then((function(e){return t(e)})).catch((function(e){return n(e.response)}))}))},a}return Object(pe.a)(t,e),t}(ge));function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(n){return ie.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!a){r.next=3;break}return r.next=3,ie.a.awrap(n(oe("activity")));case 3:try{(new Pe).getAll(t).then((function(r){var c,i,o,l,s,u,m,d,f,p;return ie.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(c=r.data,i=D(c.result),o=F(i),console.log({labels:o}),l=Boolean(o.hourConflict.length>0),!e||""!==t){v.next=8;break}return v.next=8,ie.a.awrap(ue.a.fire({icon:l?"warning":"success",title:"Sincronizaci\xf3n completada ".concat(l?"con conflictos":""),text:"".concat(e," ").concat(l?"con horarios que conflictuan favor de verificar y asignar en todo caso":"")}));case 8:return s=c.count,u=o.activities,m=o.hourConflict,d=o.map,f=o.hMin,p=o.hMax,v.next=12,ie.a.awrap(n({type:I,activities:u,count:s,hourConflict:m,map:d,search:t,hMin:f,hMax:p}));case 12:if(!a){v.next=15;break}return v.next=15,ie.a.awrap(n(le("activity")));case 15:case"end":return v.stop()}}))})).catch((function(e){var t,r;return ie.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!(Object.keys(e).length>0)){c.next=10;break}if(t=e.data,404!==(r=e.status)){c.next=7;break}return c.next=5,ie.a.awrap(n({type:I,activities:[]}));case 5:c.next=8;break;case 7:401===r?ue.a.fire({icon:"warning",title:"Upsss...",text:t.message}):ue.a.fire({icon:"error",title:"Error",text:t.message});case 8:c.next=11;break;case 10:ue.a.fire({icon:"error",title:"Error",text:e});case 11:if(!a){c.next=14;break}return c.next=14,ie.a.awrap(n(le("activity")));case 14:case"end":return c.stop()}}))}))}catch(c){console.log({getAll:c})}case 4:case"end":return r.stop()}}))}}function Ce(e,t){return function(a){return ie.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ie.a.awrap(a({type:H,param:e,value:t}));case 2:case"end":return n.stop()}}))}}a(139);var Ie=a(38),Ue=a(183),He=a(184),Me=a(185),Te=function(){return r.a.createElement("div",{className:"w-100 h-100 nav"},r.a.createElement(Ie.a,{to:"/app/home-page"},r.a.createElement(Oe.a,{className:"nav_item",title:"Listas"},r.a.createElement(Ue.a,null))),r.a.createElement(Ie.a,{to:"/app/user-control"},r.a.createElement(Oe.a,{className:"nav_item",title:"Control de usuarios"},r.a.createElement(He.a,null))),r.a.createElement(Ie.a,{to:"/sign-out"},r.a.createElement(Oe.a,{className:"nav_item",title:"Cerrar sesi\xf3n"},r.a.createElement(Me.a,null))))},Ae=(a(140),a(141),a(186)),Be=a(187),Re=function(e){var t=e.el,a=e.spaces;return r.a.createElement(Oe.a,{className:"book_el",style:{width:"".concat(100/a*t.duration,"%"),marginLeft:"".concat(100/a*t.before,"%")}},t.title)},De=function(e){var t=e.item,a=e.spaces;return r.a.createElement("div",{className:"book_item"},r.a.createElement("div",null,t.label),r.a.createElement("div",null,t.row.map((function(e){return r.a.createElement(Re,{key:"el_".concat(e._id),el:e,spaces:a})}))))};De.defaultProps={item:{},spaces:0};var Fe=De,ze=function(e){var t=e.activity;return e.loading?r.a.createElement("div",{className:"book_loading"},r.a.createElement(Ae.a,{color:"secondary"})):t.map.length>0?r.a.createElement("div",{className:"book"},t.map.map((function(e){return r.a.createElement(Fe,{item:e,spaces:t.hMax-t.hMin})}))):r.a.createElement("div",{className:"book_loading"},r.a.createElement(Be.a,null),r.a.createElement("span",null,"Registro vac\xedo"))};ze.defaultProps={activity:{},loading:!1};var Je=ze,qe=Object(l.c)((function(e){var t=e.auth,a=e.activity,n=e.load;return{user:t.user,loading:Boolean(n.activity),activity:a}}))(Je),Ge=a(196),We=a(212),Ve=a(148),Ke=a(191),Xe=a(60),Ye=a(197),$e=a(213),Qe=a(198),Ze=a(192),et=a(199),tt=a(180),at=a(210),nt=a(206),rt=a(200),ct=(a(142),a(143),function(e){var t=e.time,a=t.getHours(),n=t.getMinutes(),c=a>=12?"pm":"am";return a=(a%=12)||12,n=n<10?"0"+n:n,r.a.createElement("div",{className:"watch"},r.a.createElement("div",{className:"watch_label"},r.a.createElement("span",null,a),r.a.createElement("span",null,":"),r.a.createElement("span",null,n)),r.a.createElement("div",{className:"watch_ampm"},r.a.createElement("span",null,c)))}),it=function(e){var t=e.time,a=["Lunes","Martes","Miercoles","Jueves","Viernes","S\xe1bado","Domingo"][t.getDay()-1],n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][t.getMonth()],c=t.getDate();return r.a.createElement("div",{className:"datelabel"},r.a.createElement("span",{className:"datelabel_day"},a),r.a.createElement("span",{className:"datelabel_date"},r.a.createElement("span",null,c),r.a.createElement("span",{className:"datelabel_month"},n)))},ot=function(){var e=r.a.useState(new Date),t=Object(te.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){var e=setInterval((function(){n(new Date)}),1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",{className:"clock"},r.a.createElement(ct,{time:a}),r.a.createElement(it,{time:a}))},lt=a(4),st=a.n(lt),ut=(a(144),a(211)),mt=a(182),dt=a(189),ft=a(188),pt=a(190),vt=a(193),ht=null,gt=function(e){var t=e.refresh,a=e.search,n=e.singleFilter,c=e.filterParam,i=r.a.useRef(),o=r.a.useState(null),l=Object(te.a)(o,2),s=l[0],u=l[1],m=Boolean(s),d=m?"menu-popover":void 0,f=Boolean("conflict"===c);return r.a.createElement("div",{className:"searchBar_input"},r.a.createElement(Oe.a,{"aria-describedby":d,onClick:function(e){return u(e.currentTarget)}},r.a.createElement(ft.a,null)),r.a.createElement("input",{type:"text",id:"searchAll",ref:i,name:"searchAll",placeholder:"Busqueda R\xe1pida",onFocus:function(e){e.target.select()},onKeyUp:function(e){e.preventDefault(),e.stopPropagation(),clearTimeout(ht);var t=e.target.value;ht=setTimeout((function(){a(t)}),750)}}),r.a.createElement(ut.a,{id:d,open:m,anchorEl:s,onClose:function(){return u(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},r.a.createElement(mt.a,{dense:!0},r.a.createElement(Ve.a,{button:!0,title:"Refrescar lista de actividades",onClick:function(){u(null),i&&(i.current.value=""),t()}},r.a.createElement(dt.a,null,r.a.createElement(pt.a,null)),r.a.createElement(Ke.a,{primary:"Refrescar lista"})),r.a.createElement(Ze.a,null),r.a.createElement(Ve.a,{button:!0,selected:f,title:"Mostrar unicamente los conflictos",onClick:function(){u(null),i&&(i.current.value=""),f?t():n("conflict",!0)}},r.a.createElement(dt.a,null,r.a.createElement(vt.a,{style:{color:f?"#FF5252":""}})),r.a.createElement(Ke.a,{primary:"Filtrar conflictos ".concat(f?"seleccionado":"")})))))};gt.defaultProps={refresh:function(){},search:function(){},singleFilter:function(){}};var Et=gt,yt=function(e){var t=e.dispatch,a=e.filterParam;return r.a.createElement("div",{className:"searchBar"},r.a.createElement(Et,{search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t(Se(e))},refresh:function(){return ie.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.a.awrap(t(Se()));case 2:case"end":return e.stop()}}))},filterParam:a,singleFilter:function(e,a){return ie.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ie.a.awrap(t(Ce(e,a)));case 2:case"end":return n.stop()}}))}}))};yt.protoTypes={dispatch:st.a.func.isRequired,filterParam:st.a.string},yt.defaultProps={filterParam:""};var bt=yt,wt=Object(l.c)((function(e){return{filterParam:e.activity.filterParam}}))(bt),xt=(a(145),a(195)),Ot=a(194),_t=function(e){var t=e.item,a=e.selectActivity;return r.a.createElement("div",{className:"generalList_item ".concat(t.conflict&&"generalList_item_conflict"),title:"".concat(t.title," - ").concat(t.desc)},r.a.createElement("div",{className:"generalList_item_detail"},r.a.createElement("div",null,r.a.createElement("span",{className:"generalList_item_title"},t.title),r.a.createElement("span",{className:"generalList_item_subtitle"},t.subTitle)),r.a.createElement("div",null,r.a.createElement("span",{className:"generalList_item_hour"},"".concat(t.start," - ").concat(t.end)),r.a.createElement("div",{className:"generalList_item_footer"},r.a.createElement("span",{className:"generalList_item_location"},"".concat(t.primaryLocation," - ").concat(t.secondaryLocation)),r.a.createElement("div",{className:"generalList_item_actions"},r.a.createElement(Oe.a,{className:t.conflict&&"generalList_item_actions_con",title:"Ver detalles de ".concat(t.title),onClick:function(){return a(t)}},r.a.createElement(Ot.a,null)))))))},jt=function(e){var t=e.labelTime;return r.a.createElement("div",{className:"generalList_head"},r.a.createElement("div",null),r.a.createElement("div",{className:"generalList_head_label"},"".concat(t," ").concat(t<12?"AM":"PM"," ")))},kt=function(e){var t=e.loading,a=e.activities,n=e.selectActivity,c=0;return r.a.createElement("div",{className:"generalList"},console.log({loading:t}),t&&r.a.createElement(re.a,{className:"w-100"}),!t&&0===a.length&&r.a.createElement(Ve.a,null,r.a.createElement(dt.a,null,t?r.a.createElement(Ae.a,null):r.a.createElement(xt.a,null)),r.a.createElement(Ke.a,{primary:t?"Cargando ...":"Sin actividades almacenadas"})),!t&&a.length>0&&r.a.createElement("div",{className:"generalList_list"},a.map((function(e){return r.a.createElement("div",{key:"key_act_".concat(e._id)},e.startHour!==c&&(t=e.startHour,c=t,r.a.createElement(jt,{labelTime:t})),r.a.createElement(_t,{item:e,selectActivity:n}));var t}))))};kt.defaultProps={activities:[],loading:!1,selectActivity:function(){}};var Nt=Object(l.c)((function(e){var t=e.auth,a=e.activity,n=e.load;return{user:t.user,activities:a.activities,loading:Boolean(n.activity)}}))(kt),Lt=r.a.forwardRef((function(e,t){return r.a.createElement(Ge.a,Object.assign({ref:t},e))})),Pt=function(e){var t=e.map,a=(e.hMin,e.updateLoading),n=e.dispatch,c=r.a.useState({open:!1,change:!1,available:[],rowPattern:[],startHour:7}),i=Object(te.a)(c,2),o=i[0],l=i[1],s=function(){l({startHour:7,open:!1,change:!1,available:[],rowPattern:[]})},u=function(){if(!o.change)return ue.a.fire({icon:"warning",title:"Sin cambios registrados, necesita editar algo para guardarlo"}),null;var e,t;n((e=o,t=s,function(a){var n,r;return ie.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ie.a.awrap(a(oe("activityUpdate")));case 2:return c.prev=2,n=new Pe,c.next=6,ie.a.awrap(n.update(e));case 6:if(!(r=c.sent).status){c.next=14;break}return ue.a.fire({icon:"success",title:"Registro actualizado"}),t(),c.next=12,ie.a.awrap(a(Se(null,"",!1)));case 12:c.next=15;break;case 14:ue.a.fire({icon:"error",title:"Al editar hubo un error",text:r.msg});case 15:c.next=20;break;case 17:c.prev=17,c.t0=c.catch(2),console.log({err:c.t0});case 20:return c.prev=20,c.next=23,ie.a.awrap(a(le("activityUpdate")));case 23:return c.finish(20);case 24:case"end":return c.stop()}}),null,null,[[2,17,20,24]])}))};return r.a.createElement("div",{className:"consultant"},r.a.createElement(ot,null),r.a.createElement(wt,null),r.a.createElement(Nt,{selectActivity:function(e){if(!e.title)return null;var a=J(e,t).sort(),n=q(e,t);l(Object(p.a)({},e,{open:!0,change:!1,available:a,rowPattern:n}))}}),r.a.createElement(We.a,{fullWidth:"md",open:o.open,keepMounted:!0,TransitionComponent:Lt,"aria-labelledby":"detailActivity"},r.a.createElement("div",{className:"modal_detail_container"},r.a.createElement("div",null,r.a.createElement(Ve.a,{style:{paddingLeft:"24px",paddingRight:"24px"}},r.a.createElement(Ke.a,{primary:o.title?r.a.createElement(Xe.a,{variant:"h5"},o.title):"Actividad sin seleccionar",secondary:o.subTitle?r.a.createElement(Xe.a,{variant:"subtitle2"},o.subTitle):"Favor de seleccionar una actividad previamente."})),r.a.createElement(Ye.a,null,r.a.createElement("div",{className:"modal_detail_hour"},r.a.createElement("div",null,r.a.createElement("span",null,"Fecha"),r.a.createElement("div",null,r.a.createElement($e.a,{color:"secondary",label:o.date}))),r.a.createElement("div",null,r.a.createElement("span",null,"Estado"),r.a.createElement("div",null,o.conflict?r.a.createElement(Qe.a,{style:{backgroundColor:"#FF5252"}},"Conflicto"):r.a.createElement($e.a,{color:"primary",label:"Registrado"})))),r.a.createElement(Ze.a,{style:{width:"100%"}}),r.a.createElement("span",null,"Descripci\xf3n"),r.a.createElement(et.a,{variant:"body2",paragraph:!0,noWrap:!0},o.desc?o.desc:"Favor de seleccionar una actividad previamente."))),r.a.createElement("div",{className:"modal_detail_actions"},r.a.createElement("div",{className:"modal_detail_actions_header"},r.a.createElement(Qe.a,{onClick:function(){return n(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return function(a){return ie.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ie.a.awrap(a(oe("remove")));case 2:try{ue.a.fire({title:"Atenci\xf3n",text:"\xbfEst\xe1 seguro de eliminar la actividad?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"!Si, hazlo\xa1"}).then((function(n){var r;return ie.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!n.value){c.next=8;break}return r=new Pe,c.next=4,ie.a.awrap(r.remove(e));case 4:return ue.a.fire("!Eliminado\xa1","Se a borrado la actividad","success"),t(),c.next=8,ie.a.awrap(a(Se(null,"",!1)));case 8:case"end":return c.stop()}}))}))}catch(r){ue.a.fire({icon:"error",title:r.message})}return n.next=5,ie.a.awrap(a(le("remove")));case 5:case"end":return n.stop()}}))}}(o._id,s))}},"Eliminar"),r.a.createElement(Oe.a,{onClick:function(){return s()}},r.a.createElement(Me.a,null))),r.a.createElement(Ze.a,{style:{width:"100%"}}),r.a.createElement("div",{className:"modal_detail_actions_tools"},r.a.createElement(tt.a,null,r.a.createElement(at.a,{shrink:!0,id:"selectLocation"},"Localizaciones disponibles"),r.a.createElement(nt.a,{labelId:"selectLocation",id:"demo-simple-select-placeholder-label",value:"".concat(o.primaryLocation," - ").concat(o.secondaryLocation),onChange:function(e){return function(e){var t=e.target.value.split(" ");l(Object(p.a)({},o,{primaryLocation:t[0],secondaryLocation:t[t.length-1],change:!0}))}(e)},disabled:a},o.available.map((function(e){return r.a.createElement(rt.a,{key:"key_".concat(e),value:e},e)})))),console.log({actSelected:o,timeCon:A(60*o.startHour*60)}),r.a.createElement(tt.a,null,r.a.createElement(at.a,{shrink:!0,id:"selectInitHour"},"Hora que inicia"),r.a.createElement(nt.a,{labelId:"selectInitHour",id:"selectionInitHour",value:A(60*o.startHour*60),onChange:function(e){return function(e){var t=e.target.value,a=Number(t.split(":")[0]);l(Object(p.a)({},o,{startHour:a,change:!0}))}(e)},disabled:a},o.rowPattern.map((function(e){return r.a.createElement(rt.a,{key:"key_".concat(e),value:A(60*e*60),disabled:o.durationPattern.includes(e)},A(60*e*60))})))),r.a.createElement(tt.a,{style:{marginTop:"auto"}},r.a.createElement(we.a,{in:a,style:{width:"100%"}},r.a.createElement(re.a,null)),r.a.createElement(we.a,{in:!a,style:{width:"100%"}},r.a.createElement(Qe.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:Boolean(!o.change),onClick:function(){return u()}},"Guardar")),console.log({actSelected:o})))))))};Pt.defaultProps={hMin:0,map:[],updateLoading:!1,dispatch:function(){}};var St=Object(l.c)((function(e){var t=e.activity,a=e.load,n=t.map,r=t.hMin;return{map:n,updateLoading:Boolean(a.activityUpdate),hMin:r}}))(Pt),Ct=function(e){var t=e.spaces,a=e.hMin,n=e.isLoading;return r.a.createElement("div",{className:"book_header_span"},r.a.createElement("div",null),t>0&&!n&&r.a.createElement("div",{className:"book_header"},Array(t).fill().map((function(e,t){return r.a.createElement("div",{className:"book_header_item"},"".concat(t+a," : 00"))}))))};Ct.defaultProps={spaces:0,hMin:0,isLoading:!1};var It=Object(l.c)((function(e){var t=e.activity,a=e.load,n=t.hMin,r=t.hMax-n;return{isLoading:Boolean(a.activity),spaces:r,hMin:n}}))(Ct),Ut=(a(146),a(202)),Ht=a(201),Mt=a(203),Tt=a(204),At=function(e){var t=e.activity,a=e.dispatch,n=r.a.useRef(null);return r.a.createElement("div",{className:"controller"},t.count>0&&r.a.createElement($e.a,{color:"primary",label:"Registros: ".concat(t.count),icon:r.a.createElement(Ht.a,null)}),0===t.count&&r.a.createElement($e.a,{color:"primary",label:"Sin registros"}),r.a.createElement("div",{className:"controller_file"},r.a.createElement(Ut.a,{size:"small",style:{marginRight:"1em"},color:"secondary",onClick:function(){return a((function(e){var t,a;return ie.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ie.a.awrap(e(oe("activity")));case 2:return n.next=4,ie.a.awrap(e(oe("file")));case 4:return n.prev=4,t=new Pe,n.next=8,ie.a.awrap(t.clean());case 8:if(a=n.sent,console.log({clean:a}),!a.data.success){n.next=17;break}return n.next=14,ie.a.awrap(e({type:U}));case 14:ue.a.fire({icon:"success",title:"Registro limpio"}),n.next=18;break;case 17:ue.a.fire({icon:"error",title:"Al eliminar hubo un error",text:"Parece que ocurrio un error al eliminar los registros, verifique con el administrador"});case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(4),console.log({cleanErr:n.t0});case 23:return n.prev=23,n.next=26,ie.a.awrap(e(le("activity")));case 26:return n.next=28,ie.a.awrap(e(le("file")));case 28:return n.finish(23);case 29:case"end":return n.stop()}}),null,null,[[4,20,23,29]])}))}},r.a.createElement(Mt.a,null)),r.a.createElement("input",{ref:n,id:"registerUpload",type:"file",name:"registerUpload",style:{display:"none"},onChange:function(e){var t=e.target.files;a(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){var a;return ie.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ie.a.awrap(t(oe("activity")));case 2:return n.next=4,ie.a.awrap(t(oe("file")));case 4:try{(a=new Pe).clean().then((function(n){return ie.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(200!==n.status){r.next=4;break}a.upload(e).then((function(e){return ie.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ie.a.awrap(t(le("file")));case 2:return a.next=4,ie.a.awrap(t(Se(e.data.msg)));case 4:return a.next=6,ie.a.awrap(t(le("activity")));case 6:case"end":return a.stop()}}))})).catch((function(e){return ie.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log({uploadErr:e}),400===e.status?ue.a.fire({icon:"warning",title:"Problemas con sincronizar ...",text:e.data.activityErr}):ue.a.fire({icon:"error",title:"Error",text:e}),a.next=4,ie.a.awrap(t(le("activity")));case 4:return a.next=6,ie.a.awrap(t(le("file")));case 6:case"end":return a.stop()}}))})),r.next=9;break;case 4:return ue.a.fire({icon:"error",title:"Error",text:n.data.message}),r.next=7,ie.a.awrap(t(le("activity")));case 7:return r.next=9,ie.a.awrap(t(le("file")));case 9:case"end":return r.stop()}}))})).catch((function(e){return ie.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log({cleanErr:e}),a.next=3,ie.a.awrap(t(le("activity")));case 3:return a.next=5,ie.a.awrap(t(le("file")));case 5:case"end":return a.stop()}}))}))}catch(r){console.log({err:r})}case 5:case"end":return n.stop()}}))}}(t[0]))}}),r.a.createElement(Ut.a,{color:"primary",title:"Sincronizar registros",onClick:function(){n&&n.current.click()}},r.a.createElement(Tt.a,null))))};At.defaultProps={activity:{},dispatch:function(){}};var Bt=At,Rt=Object(l.c)((function(e){var t=e.auth,a=e.activity;return{user:t.user,activity:a}}))(Bt),Dt=function(){return r.a.createElement("div",{className:"activityBook"},r.a.createElement(Rt,null),r.a.createElement(It,null),r.a.createElement(qe,null))},Ft=function(){return r.a.createElement("div",{className:"control"},r.a.createElement(St,null),r.a.createElement(Dt,null))},zt=function(e){var t=e.token;return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement("manager0-user-manager",{token:t,filter:"email,username,role,profile,lastLogin"}))},Jt=Object(l.c)((function(e){return{token:e.auth.user.token}}))(zt),qt=Object(s.g)(Object(l.c)((function(e){return{user:e.auth.user}}))((function(e){var t=e.match,a=e.dispatch;return r.a.useEffect((function(){a(Se())}),[]),r.a.createElement("div",{className:"w-100 h-100 layout"},r.a.createElement(Te,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"".concat(t.url,"/home-page"),component:Ft}),r.a.createElement(s.b,{exact:!0,path:"".concat(t.url,"/user-control"),component:Jt})))}))),Gt=Object(ae.a)({palette:{primary:{main:"#25323a",light:"#4e5b64",dark:"#000a14"},secondary:{main:"#21cece",light:"#6cffff",dark:"#009c9d"}},typography:{useNextVariants:!0,fontFamily:["Poppins"].join(",")}}),Wt=function(e){var t=e.location,a=e.initUrl,n=e.history,c=e.dispatch,i=e.match,o=e.user,l=r.a.useState(!0),u=Object(te.a)(l,2),m=u[0],d=u[1];if(r.a.useEffect((function(){d(!1)}),[]),""===a){var f=n.location.pathname;c({type:"INIT_URL",payload:f})}return"/"===t.pathname?o.token?""===a||"/"===a||"/sign-in"===a||"/sign-up"===a?r.a.createElement(s.a,{to:"/app/home-page"}):r.a.createElement(s.a,{to:a}):r.a.createElement(s.a,{to:"/sign-in"}):r.a.createElement(ne.a,{theme:Gt},m&&r.a.createElement(re.a,null),r.a.createElement(s.d,null,r.a.createElement(be,{authUser:o,component:qt,path:"".concat(i.url,"app")}),r.a.createElement(s.b,{path:"/sign-in",component:je}),r.a.createElement(s.b,{path:"/sign-out",component:Le})))};Wt.defaultProps={initURL:""};var Vt=Object(l.c)((function(e){var t=e.auth;return{user:t.user,initUrl:t.initUrl}}))(Wt),Kt=function(){return r.a.createElement(l.a,{store:ee},r.a.createElement(o.a,{history:Y},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",component:Vt}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Kt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[108,1,2]]]);
//# sourceMappingURL=main.c5b994e0.chunk.js.map